# Gowin-138K-OC8051

**描述**：使用Gowin（高云）138K第三方开发板移植运行高云官方提供的OC8051代码 

**参考**：Gowin（高云）官方ref_design来自[OC8051_V1.0](https://github.com/GOWIN-FPGA/OC8051_V1.0) ，源文件部分使用[8051](https://github.com/freecores/8051)

**板卡**：

+ GW138_060A：基于Tang Mega 138K / 60K 二次开发的一款FPGA开发板 [GW138_060A](https://bigpig.ongridea.com/h9wtn0)

+ GW138_060B：基于GW138_060A 重新调整的开发板 （锐意制作中）

## 软件版本

+ GOWIN FPGA Designer Version V1.9.10.03

+ Keil C51 Version 9.61

## 引脚约束
| 引脚 |  网络名称   | GW138_060A                       | Tang Mega 138K|
| -----|-----| --------------------------------|-------------------|
| CLK|clkin      |  V22            | V22               |
| KEY1|rst      |  K13                  | Y12                |
| LED1|p0_out[0]      |  AA10              | P19                |
| LED2|p0_out[1]      |  AB10                    | R19             |
| LED3|p0_out[2]     |  AA11                  | T21                |
| LED4|p0_out[3]      |  AB11                  | U21                |
| LED5|p0_out[4]      |  =-                  | =(P16)                |
| KEY2|p1_in[0]      |  K14                  | AA13                |
| KEY3|p1_in[1]     |  R14                  | AB13                |
| KEY3|int1       |  P14                  | -   |
| TIMER0|t1    |  =                  | =   |
| TX|txd       |  R16                  | U15                |
| RX|rxd       |  P15                  | V14                | 


+ **注**：Tang Mega 138K的引脚约束未验证，仅按照原理图进行配置。

+ **-**   没有多余板载按钮或灯。
  
+ **=**   没验证功能（随意配置一个管脚）

## 程序使用

+ 根据板卡修改引脚约束（Tang Mega 138K配置rst时可能需要上拉）

+ 根据电脑地址修改oc8051_defines.v中的OC8051_CODES_FILE

+ 示例.in文件保存在.../oc8051/src/core中

+ 自己制作.in时，先使用Keil C51编译出.Hex文件，使用.../tool/oc8051_Rom_Maker.exe将.Hex转换为.in文件，使用Simulatror .in选项

## 常见问题

1、程序烧录没有反应

+ 查看.in文件没有选择好目录（也有可能是路径太长了/左右斜杠的问题），错误的目录选择并不会出现报错，反而编译速度比正确选择文件快很多，可以对比自己选择的目录和错误目录的编译时间来查看是否正确编译
 
+ 参考数据手册
   
2、UART没有输出

+ 参考数据手册配置波特率/Tang Mega 138K未进行验证UART，引脚仅供参考

## 关于OC8051

OC8051微控制器属于MCS-51系列，最初由英特尔在20世纪80年代设计。自推出以来，8051获得了广泛的欢迎，并在低端嵌入式系统中依然具有重要的市场应用。
8051微控制器的基本组件包括多个片上外设，如I/O端口和定时器/计数器，以及最多256字节的片上数据存储器和最多64KB的片上程序存储器。
作为一款软核微控制器，OC8051克服了8051芯片的硬件限制，允许根据信号宽度扩展片上ROM和RAM空间以运行更大的程序代码。它还允许将P3接口与外部中断输入和定时器/计数器输入分离，实现独立操作并释放复用引脚。

**OC8051微控制器的特点包括**：
+ 优化用于控制应用的8位微控制器
+ 支持16位、24位和32位数据
+ 广泛的布尔处理（单比特逻辑）能力
+ 64KB外部程序存储器寻址空间
+ 64KB外部数据存储器寻址空间
+ 最多64KB的片上程序ROM
+ 最多256字节的片上数据RAM
+ 连接外部存储器的两组总线
+ 32条双向且可单独寻址的I/O线路
+ 三个16位定时器/计数器
+ 一个UART接口
+ 六个中断源，分为两个优先级

<img src="doc/OC8051 pic 1.jpg">
